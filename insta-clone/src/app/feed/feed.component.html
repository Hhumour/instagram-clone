<app-homenav></app-homenav>

<div class="container-fluid" style="background-color: #FAFAFA;">
  
  
    <app-create-post (reloadPost)="reloadPosts()"  [bufferedImage]="bufferedImage"></app-create-post>

    <div *ngFor = "let item of feed; let i = index" class="col-lg-5 offset-lg-2" style="background-color: white; border:1px solid #DBDBDB; margin-top: 2rem; margin-bottom: 2rem; border-radius: 5px;">
      <div class="row user-details-row" style="padding: 0.5rem 0;">
        <div class="col-lg-1">
          <img src="../../assets/ss.png" class="rounded-circle profile-img" style="width: 2.5rem; height: 2.5rem; border: 1px solid black;">
        </div>
        <div class="col-lg-10">
          <div><b>{{item.post.user.instaHandle}}</b></div>
        </div>
        <div class="col-lg-1">
          <span ><b><h3 >...</h3></b></span>
        </div>
      </div>
      <div class="row user-image-row" *ngIf="postImages[i]">
        <img [src]="postImages[i]" class="img-responsive" style="width: 100%; ">
      </div>
      <div class="row like-comment-row" style="padding-top:0.4rem;">
        <a (click)="toggleLike(item.post._id,'inc')" *ngIf="!item.post.relation"><img src="../../assets/images/igheart.png" ></a>
        <a (click)="toggleLike(item.post._id,'dec')" *ngIf="item.post.relation"><img src="../../assets/images/heartr.png" ></a>
        <img src="../../assets/images/comment1.png" style="width:1.7rem; height:1.5rem; opacity: 0.75;">
      </div>
      <div class="row" style="padding:0 2rem" >
        <span *ngIf="item.post.count.likeCount > 0" >Liked by<a [routerLink]="['../profile', item.post.likesArray[0].likedBy.instaHandle]"><b>{{item.post.likesArray[0].likedBy.instaHandle}}</b></a>and<a (click)="openDialog(item.post._id)" *ngIf="item.post.count.likeCount-1 > 0" >{{item.post.count.likeCount-1}} others</a></span>
      </div>
      <div class="row" style="padding:0 2rem ">
        <span><a [routerLink]="['../profile', item.post.user.instaHandle]"><b>{{item.post.user.instaHandle}}</b></a></span><span>{{item.post.caption}}</span>
      </div>
      <div *ngIf="item.post.count.commentCount>0">
        <span class="viewComments" *ngIf="item.post.count.commentCount>2">View all {{item.post.count.commentCount}} comments</span>
        <span class="row" *ngIf="item.post.count.commentCount>0"><b>{{item.post.commentsArray[0].commentedBy.instaHandle}}</b></span>
        <span class="row" *ngIf="item.count.post.commentCount>1"><b>{{item.post.commentsArray[1].commentedBy.instaHandle}}</b></span>
      </div>
      <div class="row add-comment-section">
        <input type="text" style="height: 4rem; width:100%; border: 1px solid #EFEFEF; border-bottom: none; border-bottom-left-radius: 5px; border-bottom-right-radius: 5px;" placeholder="  Add a comment...">
        <button type="submit" class="post-create--btn_post">Post</button>
      </div>
    </div>
  
</div>












